---
title: '操作系统概述'
date: 2019-12-15 17:38:33
tags: [Operating System]
published: true
hideInList: false
feature: /post-images/cao-zuo-xi-tong.jpg
---
[TOC]

# 操作系统概述

* 操作系统是指控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源分配；以提供给用户和其他软件方便的接口和环境，它是计算机系统中最基本的系统软件

## 操作体统的基本概念

### 操作系统的目标和功能

> 向上层提供方便易用的服务

* 作为系统管理者
    * 处理机管理
    * 存储器管理
    * 文件管理
    * 设备管理
* 操作系统作为用户和硬件之间的接口
    * 命令接口
        * 联机命令接口（交互式命令接口）
            * cmd命令
        * 脱机命令接口（批处理命令接口）
            * .bat文件
        * GUI图形化用户接口（Graphical User Interface）
    * 程序接口
        * 可以在程序中进行**系统调用**来使用程序接口。普通用户不能直接使用程序接口，只能通过程序代码**间接**使用
        * 系统调用

### 操作系统的特征

* 并发（Concurrence）：宏观上同时发生，微观上交替发生
    * 并行：指事件在同一时刻同时发生
* 共享（Sharing）
    * 互斥共享：一段时间内只允许一个进程访问该资源
    * 同时共享：允许一段时间内有多个进程“同时”访问该资源，其实交替访问
* 虚拟（Virtual）
    * 虚拟是指把一个物理上的实体变为若干个逻辑上的对应物，物理实体是实际存在的，逻辑上的对应物是用户感受到的
    * 虚拟技术
        * 时分复用技术：处理器的分时共享
        * 空分复用技术：虚拟存储器
* 异步（Asynchronism）
    * 在多道程序环境下，允许多个程序并发执行，但由于资源有限，程序执行不是一贯到底的，而是走走停停的，以不可预知的速度向前推进，这就是进程的异步性
* 并发和共享的关系
    * 并发和共享是操作系统两个最基本的特征
    * 并发和共享互为存在条件
    * **并发性**是指计算机系统汇总同时存在着多个运行着的程序
    * **共享性**是指系统中的资源可供内存中的多个并发执行的进程同时使用

## 操作系统发展的分类

### 手工操作阶段（此阶段无操作系统）

* 缺点
    * 用户独占全机，资源利用率低
    * CPU等待手工操作，CPU利用不充分

### 批处理阶段（操作系统出现）

* 单道批处理系统
    * 自动性、顺序性、单道性
    * 缺点
        * 每次运行一个程序，资源利用率低
* 多道批处理系统
    * 多道程序运行：宏观上并行，微观上串行
    * 优点
        * 多道程序并发，共享计算机资源
        * 资源利用率高
        * 系统吞吐量大
    * 缺点
        * 用户响应时间长，不提供人机交互功能
* 分时操作系统
    * 同时性、交互性、独立性、及时性

##  运行环境

* 
* 程序状态字寄存器（PSW）：二进制位记录CPU状态

### 运行机制

* 内核程序：
    * CPU状态：内核态=核心态=管态
    * 执行特权指令
* 用户程序：
    * CPU状态：用户态=目态
    * 执行非特权指令

* 时钟管理
* 中断机制
* 原语
    * 操作系统中的最底层，是最接近硬件的部分
    * 原子性
    * 运行时间短，调用频繁
* 系统控制的数据结构及处理
    * 进程管理
    * 存储器管理
    * 设备管理

### 中段和异常

* 中断的作用：中断是让操作系统内核夺回CPU使用权的唯一途径，用户态变为核心态
* 中断类型
    * 内中断（异常）：陷入指令（trap）、故障（fault）、终止（abort）
    * 外中断（外部干预）：时钟中断、I/O中断请求
* 中断机制的基本原理

### 系统调用

* 对共享资源的访问和操作必须要用到系统调用

* 按功能分类：设备管理、文件管理、进程管理、进程通信、内存管理

* 系统调用与库函数的区别：一些库函数户使用系统调用，如创建文件
* 系统调用过程
    * 传参
    * 陷入指令/Trap/访管
    * 由操作系统内核程序处理系统调用请求
    * 返回应用程序

## 操作系统体系结构

* 大内核/单内核/宏内核
    * 功能
        * 进程管理、存储器管理、设备管理等功能
        * 时钟管理、中断处理、原语
    * 优点：高性能
    * 缺点：内核代码庞大，结构混乱，难以维护
* 微内核
    * 功能
        * 时钟管理、中断处理、原语
    * 优点：内核功能少，结构清晰，方便维护
    * 缺点：需要频繁切换CPU状态，性能低





















